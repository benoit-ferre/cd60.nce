openapi: 3.1.0
info:
  title: "cd60.nce \u2013 Huawei iMaster NCE-Campus OpenAPI (Tenant view)"
  description: ''
  version: 0.6.6
tags:
- name: Authentication
- name: Sites
paths:
  /controller/v2/tokens:
    post:
      summary: Obtain an access token (tenant view)
      deprecated: false
      description: ''
      tags:
      - Authentication
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRequest'
            examples:
              sample:
                value:
                  userName: admin@ac.branch
                  password: Aac@123456
                summary: sample
        required: true
      responses:
        '200':
          description: Token generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
              example:
                errcode: '0'
                errmsg: get token successfully.
                data:
                  expiredDate: '2016-10-25 12:03:37'
                  token_id: CA48D152F6B19D84:637C38259E...
          headers: {}
      security:
      - XAccessToken: []
    delete:
      summary: Revoke the current access token
      deprecated: false
      description: ''
      tags:
      - Authentication
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenDeleteRequest'
            examples:
              sample:
                value:
                  token: CA48D152F6B19D84:637C38259E...
                summary: sample
        required: true
      responses:
        '200':
          description: Token revoked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
          headers: {}
      security:
      - XAccessToken: []
  /controller/campus/v3/sites:
    get:
      summary: List sites (optional pagination)
      deprecated: false
      description: Query site list with optional pagination. Supports fuzzy name filtering
        (name) and exact ID filter (id). Use sort with %2Bname or -name.
      tags:
      - Sites
      parameters:
      - name: name
        in: query
        description: Filter by site name; URL-escape special characters.
        required: false
        schema:
          type: string
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      - name: pageIndex
        in: query
        description: Index of the current page. If empty or 0, the API returns the
          first page with pageSize=100.
        required: false
        schema:
          type: integer
          minimum: 0
          maximum: 5000
          default: 0
      - name: pageSize
        in: query
        description: Page size. If empty and pageIndex is not 0, defaults to 20.
        required: false
        schema:
          type: integer
          minimum: 0
          maximum: 100
          default: 20
      - name: id
        in: query
        description: Exact match by site ID.
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sorting field, e.g., +name for ascending or -name for descending.
          Use %2B for "+" in URLs.
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Sites page
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SitesListResponse'
              example:
                errcode: '0'
                errmsg: ''
                pageIndex: 0
                pageSize: 20
                totalRecords: 1
                data:
                - id: ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
                  name: site1
                  type:
                  - AP
          headers: {}
      security:
      - XAccessToken: []
      x-codeSamples:
      - lang: cURL
        label: cURL example (optional pagination with sort)
        source: 'curl -k -s -L -G ''https://192.168.1.125:18002/controller/campus/v3/sites''
          -H ''Accept: application/json'' -H ''Accept-Language: en-US'' -H ''X-ACCESS-TOKEN:
          x-yyyyyy'' --data-urlencode ''pageIndex=1'' --data-urlencode ''pageSize=20''
          --data-urlencode ''name=siteName'' --data-urlencode ''sort=%2Bname'''
    post:
      summary: Create sites (batch)
      deprecated: false
      description: ''
      tags:
      - Sites
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSitesRequest'
            examples:
              sample:
                value:
                  sites:
                  - name: site1
                    southAccName: Public Default South Access
                    type:
                    - AP
                summary: sample
        required: true
      responses:
        '200':
          description: Creation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSitesResponse'
              example:
                errcode: '0'
                errmsg: ''
                success:
                - id: ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
                  name: site1
                  type:
                  - AP
                  pattern: 1
                  longitude: '111'
                  latitude: '50'
                fail: []
          headers: {}
      security:
      - XAccessToken: []
    delete:
      summary: Delete sites (DELETE alternative)
      deprecated: false
      description: 'Deletes sites by IDs using HTTP DELETE with a request body.

        Huawei docs advise using POST /controller/campus/v3/sites/action/batch-delete,

        but this legacy form is still documented.

        '
      tags:
      - Sites
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  items:
                    type: string
              required:
              - ids
            examples:
              sample:
                summary: sample
                value:
                  ids:
                  - ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
      responses:
        '200':
          description: Delete accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      security:
      - XAccessToken: []
  /controller/campus/v3/sites/batchupdate:
    put:
      summary: Update sites (batch)
      deprecated: false
      description: 'Updates multiple sites in one request. **Top-level JSON array**
        is required.

        Per Huawei NBI guides, during the modify operation (PUT), omitted optional
        fields or fields set to `null` typically leave existing values unchanged;
        to clear a string field, set it to `""`.

        '
      tags:
      - Sites
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/SiteBatchUpdateItem'
            examples:
              sample:
                value:
                - siteId: ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
                  name: site1
                  description: site1
                  latitude: '50'
                  longtitude: '111'
                  longitude: '111'
                  contact: David
                  tag:
                  - abcd
                  isolated: false
                  type:
                  - AP
                  email: xxx@xxx.xxx
                  phone: '15277431823'
                  postcode: '215000'
                  address: 66 JiangYun Road
                  siteTag: ''
                summary: sample
        required: true
      responses:
        '200':
          description: Update request accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
          headers: {}
      security:
      - XAccessToken: []
  /controller/campus/v3/sites/action/batch-delete:
    post:
      summary: Delete sites (batch)
      deprecated: false
      description: Deletes multiple sites by their IDs using a POST action endpoint.
      tags:
      - Sites
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  items:
                    type: string
                    format: uuid
              required:
              - ids
            examples:
              sample:
                value:
                  ids:
                  - ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
                summary: sample
        required: true
      responses:
        '200':
          description: Batch delete accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
          headers: {}
      security:
      - XAccessToken: []
      x-codeSamples:
      - lang: cURL
        label: cURL example (from Huawei doc)
        source: "curl -k -s -L -X POST               -H 'Content-Type: application/json'\
          \               -H 'Accept: application/json'               -H 'Accept-Language:\
          \ en-US'               -H 'X-ACCESS-TOKEN: x-yyyyyy'               'https://192.168.1.125:18002/controller/campus/v3/sites/action/batch-delete'\
          \               -d '{\n    \"ids\": [\"ea25fdbf-8dee-4823-bac2-5bfe8e3359ca\"\
          ]\n  }'\n"
  /controller/campus/v3/sites/{siteId}:
    put:
      summary: Modify a site (non-batch)
      deprecated: false
      description: ''
      tags:
      - Sites
      parameters:
      - name: siteId
        in: path
        description: Site identifier
        required: true
        schema:
          type: string
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        example: ''
        schema:
          type: string
          default: en-US
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSite'
            examples:
              sample:
                summary: sample
                value:
                  name: site1
                  description: site1
                  latitude: '50'
                  longtitude: '111'
                  longitude: '111'
                  contact: David
                  tag:
                  - abcd
                  isolated: false
                  type:
                  - AP
                  email: xxx@xxx.xxx
                  phone: '15277431823'
                  postcode: '215000'
                  address: 66 JiangYun Road
                  siteTag: ''
      responses:
        '200':
          description: Update accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
      security:
      - XAccessToken: []
  /controller/campus/v3/sites/action/batch-query:
    post:
      summary: Query sites in batches
      deprecated: false
      description: 'Queries site information by a list of site IDs. Matches Huawei
        doc: "Query Sites in Batches".'
      tags:
      - Sites
      parameters:
      - name: Accept-Language
        in: header
        description: Language for messages. Some docs show `en_US`; `en-US` is used
          here.
        required: false
        schema:
          type: string
          default: en-US
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatchQuerySitesRequest'
            examples:
              sample:
                summary: sample
                value:
                  siteIds:
                  - ea25fdbf-8dee-4823-bac2-5bfe8e3359ca
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BatchQuerySitesResponse'
      security:
      - XAccessToken: []
      x-codeSamples:
      - lang: cURL
        label: cURL example (from Huawei doc)
        source: 'curl -k -s -L -X POST -H ''Content-Type: application/json'' -H ''Accept:
          application/json'' -H ''Accept-Language: en-US'' -H ''X-ACCESS-TOKEN: x-yyyyyy''
          ''https://192.168.1.125:18002/controller/campus/v3/sites/action/batch-query''
          -d ''{\n "siteIds": ["ea25fdbf-8dee-4823-bac2-5bfe8e3359ca"]\n }''

          '
webhooks: {}
components:
  schemas:
    ApiError:
      type: object
      properties:
        errcode:
          type: string
        errmsg:
          type: string
      required:
      - errcode
    TokenRequest:
      type: object
      properties:
        userName:
          type: string
        password:
          type: string
      required:
      - userName
      - password
    TokenResponse:
      type: object
      properties:
        errcode:
          type: string
        errmsg:
          type: string
        data:
          type: object
          properties:
            expiredDate:
              type: string
              description: Expiration timestamp string
            token_id:
              type: string
              description: Access token value
          required:
          - token_id
      required:
      - errcode
      - data
    TokenDeleteRequest:
      type: object
      properties:
        token:
          type: string
      required:
      - token
    Site:
      type: object
      properties:
        id: &id001
          type: string
        name: &id002
          type: string
        description: &id003
          type:
          - string
          - 'null'
        type: &id004
          type: array
          items:
            type: string
        pattern: &id005
          type:
          - integer
          - 'null'
        latitude: &id006
          type:
          - number
          - string
          - 'null'
        longitude: &id007
          type:
          - number
          - string
          - 'null'
        longtitude: &id008
          type:
          - number
          - string
          - 'null'
          description: Historical typo returned by API in some versions
        contact: &id009
          type:
          - string
          - 'null'
        tag: &id010
          type: array
          items:
            type: string
        isolated: &id011
          type:
          - boolean
          - 'null'
        email: &id012
          type:
          - string
          - 'null'
        phone: &id013
          type:
          - string
          - 'null'
        postcode: &id014
          type:
          - string
          - 'null'
        address: &id015
          type:
          - string
          - 'null'
        siteTag: &id016
          type:
          - string
          - 'null'
    SitesListResponse:
      type: object
      properties:
        errcode:
          type: string
        errmsg:
          type: string
        pageIndex:
          type: integer
        pageSize:
          type: integer
        totalRecords:
          type: integer
        data:
          type: array
          items:
            $ref: '#/components/schemas/Site'
      required:
      - errcode
      - pageIndex
      - pageSize
      - totalRecords
    CreateSiteItem:
      type: object
      properties:
        name:
          type: string
          description: Unique site name within tenant.
        southAccName:
          type: string
          description: Southbound access service name
        type:
          type: array
          items:
            type: string
            description: Device role types hosted in this site (e.g., AP)
      required:
      - name
      - type
    CreateSitesRequest:
      type: object
      properties:
        sites:
          type: array
          items:
            $ref: '#/components/schemas/CreateSiteItem'
      required:
      - sites
    CreateSitesResponse:
      type: object
      properties:
        errcode:
          type: string
        errmsg:
          type: string
        success:
          type: array
          items:
            $ref: '#/components/schemas/Site'
        fail:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              errmsg:
                type: string
      required:
      - errcode
    SiteBatchUpdateItem:
      type: object
      description: Item for batch site update under `/controller/campus/v3/sites/batchupdate`.
      properties:
        siteId:
          type: string
          description: Site identifier
        name:
          type: string
        description:
          type:
          - string
          - 'null'
        latitude:
          type:
          - number
          - string
          - 'null'
        longtitude:
          type:
          - number
          - string
          - 'null'
        longitude:
          type:
          - number
          - string
          - 'null'
        contact:
          type:
          - string
          - 'null'
        tag:
          type: array
          items:
            type: string
        isolated:
          type: boolean
        type:
          type: array
          items:
            type: string
        email:
          type:
          - string
          - 'null'
        phone:
          type:
          - string
          - 'null'
        postcode:
          type:
          - string
          - 'null'
        address:
          type:
          - string
          - 'null'
        siteTag:
          type:
          - string
          - 'null'
      required:
      - siteId
    UpdateSite:
      type: object
      description: Fields to modify a single site via PUT /controller/campus/v3/sites/{siteId}.
        Omitted optional fields or fields set to null typically keep existing values;
        to clear a string field, set it to "".
      properties:
        name:
          type: string
        latitude:
          type:
          - number
          - string
          - 'null'
        longtitude:
          type:
          - number
          - string
          - 'null'
          description: Historical typo returned by API in some versions
        longitude:
          type:
          - number
          - string
          - 'null'
        contact:
          type:
          - string
          - 'null'
        tag:
          type: array
          items:
            type: string
        isolated:
          type: boolean
        type:
          type: array
          items:
            type: string
        email:
          type:
          - string
          - 'null'
        phone:
          type:
          - string
          - 'null'
        postcode:
          type:
          - string
          - 'null'
        address:
          type:
          - string
          - 'null'
        siteTag:
          type:
          - string
          - 'null'
    BatchQuerySitesRequest:
      type: object
      properties:
        siteIds:
          type: array
          items:
            type: string
          minItems: 1
          maxItems: 100
          description: Site ID list. If not empty, exact query is performed by IDs.
      required:
      - siteIds
    SiteQueryItem:
      type: object
      properties:
        id: *id001
        name: *id002
        description: *id003
        type: *id004
        pattern: *id005
        latitude: *id006
        longitude: *id007
        longtitude: *id008
        contact: *id009
        tag: *id010
        isolated: *id011
        email: *id012
        phone: *id013
        postcode: *id014
        address: *id015
        siteTag: *id016
        tenantId:
          type:
          - string
          - 'null'
        organizationId:
          type:
          - string
          - 'null'
        organizationName:
          type:
          - string
          - 'null'
        approvalSwitch:
          type:
          - boolean
          - 'null'
        autoApprovalSwitch:
          type:
          - boolean
          - 'null'
        validityPeriod:
          type:
          - integer
          - 'null'
        siteCode:
          type:
          - string
          - 'null'
        siteCodeExpireTime:
          type:
          - integer
          - string
          - 'null'
        isSiteCodeExpired:
          type:
          - boolean
          - 'null'
        totalDeviceCount:
          type:
          - integer
          - 'null'
    BatchQuerySitesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SiteQueryItem'
      required:
      - data
  securitySchemes:
    XAccessToken:
      type: apiKey
      in: header
      name: X-ACCESS-TOKEN
      description: Token obtained via **POST /controller/v2/tokens** and sent in every
        subsequent request.
servers: []
security:
- XAccessToken: []
